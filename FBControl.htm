<!--
    Auto-generated test-site
-->
<html>
<head>
<title>test page for object fbcontrol</title>
</head>
    <script type="text/javascript">
        function plugin0()
        {
            return document.getElementById('plugin0');
        }
        plugin = plugin0;
        function addEvent(obj, name, func)
        {
            if (window.addEventListener) {
                obj.addEventListener(name, func, false); 
            } else {
                obj.attachEvent("on"+name, func);
            }
        }
        
        function load()
        {
            addEvent(plugin(), 'joystickData', function(joyButton){
                document.getElementById('type').innerHTML = joyButton.type;
                document.getElementById('value').innerHTML = joyButton.value;
            });
        }
        function pluginLoaded() {
            alert("Plugin loaded!");
        }

        function init() {
            if(plugin().init('/dev/input/js0')) {
                console.log("Loaded successfully");
            }
            else {
                console.log("Failed to load joystick");
            }
        }
        
        function testEvent()
        {
            plugin().testEvent();
        }

        var intervalId = -1;
        function startPoll() {
            intervalId = setInterval(function() {
                    plugin().poll();
                }, 30);
        }

        function stopPoll() {
            clearInterval(intervalId);
        }
        
    </script>
<body onload="load()">
<object id="plugin0" type="application/x-joyfull" width="0" height="0">
    <param name="onload" value="pluginLoaded" />
</object><br />

<h3>Type: <div id=type></div></h3>
<h3>Value: <div id=value></div></h3>
    
<a href="#" onclick="javascript:init()">Initialize Joystick</a> <br />
<a href="#" onclick="javascript:startPoll()">Start polling for values</a> <br />
<a href="#" onclick="javascript:stopPoll()">Stop polling for values</a> <br />
</body>
</html>
